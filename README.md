# üö® PONTE PILAS - Plataforma Ciudadana de Reportes de Seguridad

<div align="center">
  <img src="./proyecto/proyecto-ponte-pilas/src/recursos/policia-logo.png" alt="Logo Ponte Pilas" width="200">
  
  **Una plataforma web que permite a los ciudadanos de Quito contribuir activamente a la seguridad y bienestar de su ciudad**
  
  [![React](https://img.shields.io/badge/React-19.1.0-blue.svg)](https://reactjs.org/)
  [![Node.js](https://img.shields.io/badge/Node.js-Express-green.svg)](https://nodejs.org/)
  [![MySQL](https://img.shields.io/badge/Database-MySQL-orange.svg)](https://mysql.com/)
  [![JWT](https://img.shields.io/badge/Auth-JWT-red.svg)](https://jwt.io/)
</div>

## üìã Descripci√≥n del Proyecto

**PONTE PILAS** es una plataforma web integral que permite a los ciudadanos reportar incidentes de seguridad en tiempo real, ayudando a crear una ciudad m√°s segura y conectada. El sistema incluye funcionalidades para usuarios regulares y administradores, con un enfoque en la facilidad de uso y la gesti√≥n eficiente de reportes.

### üéØ Objetivos Principales

- **Facilitar el reporte ciudadano** de incidentes de seguridad
- **Mejorar la respuesta** de las autoridades ante emergencias
- **Crear una red colaborativa** entre ciudadanos y autoridades
- **Proporcionar datos en tiempo real** sobre la seguridad urbana
- **Integrar tecnolog√≠as modernas** como geolocalizaci√≥n y mapas interactivos

## ‚ö° Caracter√≠sticas Principales

### üë• Para Usuarios Ciudadanos
- ‚úÖ **Registro e inicio de sesi√≥n** seguro con JWT
- ‚úÖ **Reporte de incidentes** con categorizaci√≥n (robos, accidentes, emergencias m√©dicas, etc.)
- ‚úÖ **Geolocalizaci√≥n autom√°tica** y selecci√≥n manual en mapas
- ‚úÖ **Seguimiento de reportes** enviados
- ‚úÖ **Perfil de usuario** editable
- ‚úÖ **Recuperaci√≥n de contrase√±a** por email
- ‚úÖ **Interfaz intuitiva** y responsive

### üë®‚Äçüíº Para Administradores
- ‚úÖ **Dashboard administrativo** completo
- ‚úÖ **Gesti√≥n de usuarios** (CRUD completo)
- ‚úÖ **Validaci√≥n y moderaci√≥n** de reportes
- ‚úÖ **Generaci√≥n de reportes** y estad√≠sticas
- ‚úÖ **Notificaciones y alertas** en tiempo real
- ‚úÖ **Configuraci√≥n del sistema**

### üîß Caracter√≠sticas T√©cnicas
- ‚úÖ **Autenticaci√≥n JWT** con roles de usuario
- ‚úÖ **API RESTful** documentada
- ‚úÖ **Base de datos relacional** MySQL
- ‚úÖ **Integraci√≥n con Google Maps**
- ‚úÖ **Arquitectura MVC** en el backend
- ‚úÖ **Componentes React** reutilizables
- ‚úÖ **Responsive design** para dispositivos m√≥viles

## üèóÔ∏è Arquitectura del Sistema

```
PONTE PILAS/
‚îú‚îÄ‚îÄ üé® FRONTEND (React SPA)
‚îÇ   ‚îú‚îÄ‚îÄ Autenticaci√≥n de usuarios
‚îÇ   ‚îú‚îÄ‚îÄ Dashboard interactivo
‚îÇ   ‚îú‚îÄ‚îÄ Formularios de reporte
‚îÇ   ‚îú‚îÄ‚îÄ Integraci√≥n con mapas
‚îÇ   ‚îî‚îÄ‚îÄ Panel administrativo
‚îÇ
‚îú‚îÄ‚îÄ ‚öôÔ∏è BACKEND (Node.js + Express)
‚îÇ   ‚îú‚îÄ‚îÄ API RESTful
‚îÇ   ‚îú‚îÄ‚îÄ Autenticaci√≥n JWT
‚îÇ   ‚îú‚îÄ‚îÄ Controladores MVC
‚îÇ   ‚îú‚îÄ‚îÄ Modelos de datos
‚îÇ   ‚îî‚îÄ‚îÄ Middlewares de seguridad
‚îÇ
‚îî‚îÄ‚îÄ üóÑÔ∏è BASE DE DATOS (MySQL)
    ‚îú‚îÄ‚îÄ Usuarios y roles
    ‚îú‚îÄ‚îÄ Reportes e incidentes
    ‚îú‚îÄ‚îÄ Relaciones y metadatos
    ‚îî‚îÄ‚îÄ Logs del sistema
```

## üõ†Ô∏è Tecnolog√≠as Utilizadas

### Frontend
| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| **React** | 19.1.0 | Framework principal |
| **React Router DOM** | 7.6.2 | Navegaci√≥n SPA |
| **Axios** | 1.9.0 | Cliente HTTP |
| **Google Maps API** | 2.20.7 | Mapas y geolocalizaci√≥n |
| **CSS3** | - | Estilos y dise√±o responsive |

### Backend
| Tecnolog√≠a | Versi√≥n | Prop√≥sito |
|------------|---------|-----------|
| **Node.js** | - | Runtime de JavaScript |
| **Express.js** | 5.1.0 | Framework web |
| **MySQL2** | 3.14.2 | Driver de base de datos |
| **Sequelize** | - | ORM para MySQL |
| **JWT** | 9.0.2 | Autenticaci√≥n |
| **bcryptjs** | 3.0.2 | Encriptaci√≥n de contrase√±as |
| **Nodemailer** | - | Env√≠o de emails |
| **CORS** | 2.8.5 | Pol√≠tica de recursos cruzados |

### Base de Datos
- **MySQL** - Base de datos relacional principal
- **Esquema normalizado** con relaciones bien definidas
- **√çndices optimizados** para consultas frecuentes

## üìÅ Estructura del Proyecto

```
Proyectoweb/
‚îú‚îÄ‚îÄ üìÅ proyecto/                          # FRONTEND (React Application)
‚îÇ   ‚îî‚îÄ‚îÄ proyecto-ponte-pilas/
‚îÇ       ‚îú‚îÄ‚îÄ üìÅ public/                    # Archivos p√∫blicos y est√°ticos
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ index.html               # Template HTML principal
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ favicon.ico              # Icono de la aplicaci√≥n
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ manifest.json            # Configuraci√≥n PWA
‚îÇ       ‚îú‚îÄ‚îÄ üìÅ src/                      # C√≥digo fuente de React
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ App.js                # Componente ra√≠z con rutas y estado global
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ index.js              # Punto de entrada de React
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ componentes/          # Componentes React
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üè† Home.jsx          # P√°gina de inicio/landing
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üë§ CrearCuenta.jsx   # Registro de usuarios
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üì± MenuUsuario.jsx   # Dashboard principal con mapas
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üîê LoginAdmin.jsx    # Autenticaci√≥n de administradores
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‚öôÔ∏è MenuAdministracion.jsx # Panel administrativo
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìù GenerarReporte.jsx # Formulario de reportes
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üë• GestionUsuarios.jsx # CRUD de usuarios (admin)
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üîî NotificacionesAlertas.jsx # Dashboard de reportes
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ‚úÖ ValidarAlertas.jsx # Moderaci√≥n de reportes
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìä InformacionUsuario.jsx # Perfil de usuario
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üë®‚Äçüíº InformacionUsuarioAdm.jsx # Perfil de admin
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üîë RecuperarCuenta.jsx # Recuperaci√≥n de contrase√±a
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üëÅÔ∏è VisualizarReportes.jsx # Vista detallada de reportes
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üìÅ estilos/              # Hojas de estilo CSS por componente
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üìÅ recursos/             # Im√°genes, logos e iconos
‚îÇ       ‚îú‚îÄ‚îÄ üìÑ package.json              # Dependencias y scripts de React
‚îÇ       ‚îî‚îÄ‚îÄ üìÑ README.md                 # Documentaci√≥n del frontend
‚îÇ
‚îú‚îÄ‚îÄ üìÅ server/                           # BACKEND (Node.js + Express API)
‚îÇ   ‚îú‚îÄ‚îÄ üìÑ server.js                     # Servidor principal de Express
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ config/                       # Configuraciones del sistema
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ sequelize.config.js       # Configuraci√≥n de base de datos
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ emailConfig.js            # Configuraci√≥n de env√≠o de emails
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ controllers/                  # Controladores MVC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ users.controllers.js      # L√≥gica de usuarios y autenticaci√≥n
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ incidents.controllers.js  # L√≥gica de reportes/incidentes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ reports.controllers.js    # L√≥gica de reportes y estad√≠sticas
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ models/                       # Modelos de datos (Sequelize)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ users.models.js           # Modelo de usuarios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ incidents.models.js       # Modelo de incidentes
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ reports.models.js         # Modelo de reportes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ relaciones.models.js      # Relaciones entre modelos
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ routes/                       # Rutas de la API REST
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ users.routes.js           # Endpoints de usuarios
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ incidents.routes.js       # Endpoints de incidentes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ reports.routes.js         # Endpoints de reportes
‚îÇ   ‚îú‚îÄ‚îÄ üìÅ middlewares/                  # Middlewares de Express
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ authorization.middleware.js # Verificaci√≥n JWT y autorizaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ üìÑ package.json                  # Dependencias del backend
‚îÇ
‚îî‚îÄ‚îÄ üìÑ README.md                         # Documentaci√≥n principal del proyecto
```

## üöÄ Instalaci√≥n y Configuraci√≥n

### Prerrequisitos
- **Node.js** (versi√≥n 16 o superior)
- **MySQL** (versi√≥n 8.0 o superior)
- **Git** para clonar el repositorio
- **Editor de c√≥digo** (VS Code recomendado)

### 1. Clonar el Repositorio
```bash
git clone https://github.com/JoseC982/Proyectoweb.git
cd Proyectoweb
```

### 2. Configuraci√≥n del Backend

```bash
# Navegar a la carpeta del servidor
cd server

# Instalar dependencias
npm install

# Crear archivo de configuraci√≥n
cp .env.example .env
```

**Configurar variables de entorno en `.env`:**
```env
# Base de datos MySQL
DB_HOST=localhost
DB_PORT=3306
DB_NAME=ponte_pilas_db
DB_USER=tu_usuario
DB_PASSWORD=tu_contrase√±a

# JWT Secret
JWT_SECRET=tu_clave_secreta_muy_segura

# Configuraci√≥n de email
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USER=tu_email@gmail.com
EMAIL_PASS=tu_contrase√±a_app

# Puerto del servidor
PORT=8000
```

**Crear la base de datos:**
```sql
CREATE DATABASE ponte_pilas_db;
USE ponte_pilas_db;
```

**Iniciar el servidor:**
```bash
# Desarrollo con nodemon
npm run nodemon

# Producci√≥n
npm start
```

### 3. Configuraci√≥n del Frontend

```bash
# Navegar a la carpeta del frontend
cd ../proyecto/proyecto-ponte-pilas

# Instalar dependencias
npm install

# Configurar API de Google Maps (opcional)
# Crear archivo .env en la ra√≠z del frontend
echo "REACT_APP_GOOGLE_MAPS_API_KEY=tu_api_key_de_google_maps" > .env

# Iniciar la aplicaci√≥n en desarrollo
npm start
```

### 4. Verificaci√≥n de Instalaci√≥n

1. **Backend**: Abrir http://localhost:8000 (deber√≠a mostrar "API funcionando")
2. **Frontend**: Abrir http://localhost:3000 (aplicaci√≥n React)
3. **Base de datos**: Verificar conexi√≥n en logs del servidor

## üìñ Gu√≠a de Uso

### Para Usuarios Ciudadanos

1. **Registro**: Crear cuenta en la p√°gina principal
2. **Login**: Iniciar sesi√≥n con credenciales
3. **Reportar**: Usar el formulario para reportar incidentes
4. **Ubicaci√≥n**: Permitir geolocalizaci√≥n o seleccionar manualmente
5. **Seguimiento**: Ver el estado de reportes enviados

### Para Administradores

1. **Acceso**: Login especial para administradores
2. **Dashboard**: Ver estad√≠sticas y reportes en tiempo real
3. **Gesti√≥n**: Administrar usuarios y validar reportes
4. **Moderaci√≥n**: Aprobar o rechazar reportes ciudadanos
5. **Reportes**: Generar informes y estad√≠sticas

## üîê Seguridad

- **Autenticaci√≥n JWT** con tokens de acceso y refresh
- **Encriptaci√≥n bcrypt** para contrase√±as
- **Validaci√≥n de datos** en frontend y backend
- **Sanitizaci√≥n de inputs** para prevenir inyecciones
- **CORS configurado** para requests seguros
- **Rate limiting** para prevenir spam
- **Roles y permisos** diferenciados

## üìö API Endpoints

### Autenticaci√≥n
```
POST /api/users/register     # Registro de usuario
POST /api/users/login        # Inicio de sesi√≥n
POST /api/users/refresh      # Renovar token
POST /api/users/logout       # Cerrar sesi√≥n
```

### Usuarios
```
GET    /api/users/profile    # Obtener perfil
PUT    /api/users/profile    # Actualizar perfil
DELETE /api/users/:id        # Eliminar usuario (admin)
GET    /api/users/           # Listar usuarios (admin)
```

### Incidentes/Reportes
```
POST   /api/incidents/       # Crear reporte
GET    /api/incidents/       # Listar reportes
GET    /api/incidents/:id    # Obtener reporte espec√≠fico
PUT    /api/incidents/:id    # Actualizar reporte (admin)
DELETE /api/incidents/:id    # Eliminar reporte (admin)
```

## üß™ Testing

```bash
# Backend
cd server
npm test

# Frontend
cd proyecto/proyecto-ponte-pilas
npm test
```

## üöÄ Deployment

### Producci√≥n con PM2
```bash
# Instalar PM2
npm install -g pm2

# Configurar y ejecutar
pm2 start server.js --name "ponte-pilas-api"
pm2 startup
pm2 save
```

### Build del Frontend
```bash
cd proyecto/proyecto-ponte-pilas
npm run build
# Los archivos est√°ticos estar√°n en la carpeta 'build'
```

## ü§ù Contribuci√≥n

1. **Fork** el repositorio
2. **Crear rama** para tu feature (`git checkout -b feature/nueva-funcionalidad`)
3. **Commit** tus cambios (`git commit -m 'Agregar nueva funcionalidad'`)
4. **Push** a la rama (`git push origin feature/nueva-funcionalidad`)
5. **Crear Pull Request**

### Est√°ndares de C√≥digo
- **ESLint** para JavaScript
- **Prettier** para formateo
- **Comentarios en espa√±ol** para documentaci√≥n
- **Commits descriptivos** en espa√±ol
- **Testing** para nuevas funcionalidades

## üìù Licencia

Este proyecto est√° bajo la Licencia MIT. Ver el archivo `LICENSE` para m√°s detalles.

## üë• Equipo de Desarrollo

- **Desarrollador Principal**: JoseC982
- **Frontend**: React.js con componentes funcionales
- **Backend**: Node.js con arquitectura MVC
- **Base de Datos**: MySQL con Sequelize ORM

## üìû Contacto y Soporte

- **GitHub**: [@JoseC982](https://github.com/JoseC982)
- **Repositorio**: [Proyectoweb](https://github.com/JoseC982/Proyectoweb)
- **Issues**: [Reportar problemas](https://github.com/JoseC982/Proyectoweb/issues)

## üîÑ Versiones y Changelog

### v1.0.0 (Actual)
- ‚úÖ Sistema completo de usuarios y autenticaci√≥n
- ‚úÖ Reportes de incidentes con geolocalizaci√≥n
- ‚úÖ Panel administrativo funcional
- ‚úÖ Integraci√≥n con Google Maps
- ‚úÖ API RESTful completa
- ‚úÖ Frontend responsive

### Pr√≥ximas Versiones
- üîÆ Notificaciones push en tiempo real
- üîÆ App m√≥vil nativa
- üîÆ Integraci√≥n con redes sociales
- üîÆ Dashboard avanzado con gr√°ficos
- üîÆ Sistema de chat interno

---

<div align="center">
  <p><strong>üö® PONTE PILAS - Construyendo una ciudad m√°s segura, juntos üö®</strong></p>
  <p><em>Desarrollado con ‚ù§Ô∏è para la ciudadan√≠a de Quito</em></p>
</div>
